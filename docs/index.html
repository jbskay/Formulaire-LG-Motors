<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Formulaire de paiement - Client & Agent</title>
  <link rel="stylesheet" href="formulaire.css" />
</head>

<body>

  <div class="logo-container">
    <header class="page-header">
      <img src="images/logo.jpg" alt="Logo de l'entreprise" class="logo">
    </header>
  </div>

  <main class="container" aria-labelledby="pageTitle">
    <h1 id="pageTitle">Enregistrement & paiement</h1>

    <!-- Remplace action="#" par l'URL serveur si tu veux un POST classique -->
    <form id="enregistrementForm" action="#" method="post" enctype="multipart/form-data" novalidate>
     
      <!-- 1. Informations du client -->
      <fieldset>
        <legend>1. Informations du client</legend>

        <label for="clientName">Nom complet <span aria-hidden="true">*</span></label>
        <input id="clientName" name="clientName" type="text" required />

        <label for="clientPhone">Numéro de téléphone <span aria-hidden="true">*</span></label>
        <input id="clientPhone" name="clientPhone" type="tel"
               required pattern="^\+?\d{10,13}$"
               title="Ex: +243XXXXXXXXX ou 0XXXXXXXXX" />

        <label for="clientEmail">Adresse e-mail</label>
        <input id="clientEmail" name="clientEmail" type="email" placeholder="exemple@gmail.com" />

        <label for="clientPhoto">Photo du client</label>
        <input id="clientPhoto" name="clientPhoto" type="file" accept="image/*" />
        <img id="clientPhotoPreview" class="img-preview" alt="Aperçu photo client" />
      </fieldset>

      <!-- 2. Informations de l’agent -->
      <fieldset>
        <legend>2. Informations de l’agent</legend>

        <label for="agentName">Nom de l'agent <span aria-hidden="true">*</span></label>
        <input id="agentName" name="agentName" type="text" required />

        <label for="agentPhoto">Photo de l'agent</label>
        <input id="agentPhoto" name="agentPhoto" type="file" accept="image/*" />
        <img id="agentPhotoPreview" class="img-preview" alt="Aperçu photo agent" />
      </fieldset>

      <!-- 3. Détails de la transaction -->
      <fieldset>
        <legend>3. Détails de la transaction</legend>

        <label for="reason">Raison du paiement <span aria-hidden="true">*</span></label>
        <input id="reason" name="reason" type="text" required />

        <label for="amount">Montant du paiement <span aria-hidden="true">*</span></label>
        <input id="amount" name="amount" type="number" step="0.01" min="0.01" required />

        <label>Mode de paiement <span aria-hidden="true">*</span></label>
        <select id="paymentMethod" name="paymentMethod" required>
          <option value="">-- Choisir --</option>
          <option>M-Pesa</option>
          <option>Airtel Money</option>
          <option>Orange Money</option>
        </select>
      </fieldset>

      <!-- 4. Conditions & consentement -->
      <fieldset>
        <legend>4. Conditions & consentement</legend>

        <div class="checkbox-row">
          <input id="readInstructions" name="readInstructions" type="checkbox" required />
          <label for="readInstructions">Je confirme avoir lu et accepté les instructions <span aria-hidden="true">*</span></label>
        </div>

        <div class="checkbox-row">
          <input id="acceptTos" name="acceptTos" type="checkbox" required />
          <label for="acceptTos">J’accepte les conditions générales <span aria-hidden="true">*</span></label>
        </div>
      </fieldset>

      <!-- 5. Signatures -->
      <fieldset>
        <legend>5. Signatures</legend>

        <div class="signature-block">
          <h4>Signature du client <span class="small">*</span></h4>
          <canvas id="sigClient" class="signature" aria-label="Signature du client"></canvas>
          <div class="sig-actions">
            <button type="button" data-clear="sigClient">Effacer</button>
            <button type="button" data-save="sigClient">Enregistrer signature</button>
          </div>
          <input type="hidden" id="sigClientData" name="sigClientData" />
        </div>

        <div class="signature-block">
          <h4>Signature de l'agent <span class="small">*</span></h4>
          <canvas id="sigAgent" class="signature" aria-label="Signature de l'agent"></canvas>
          <div class="sig-actions">
            <button type="button" data-clear="sigAgent">Effacer</button>
            <button type="button" data-save="sigAgent">Enregistrer signature</button>
          </div>
          <input type="hidden" id="sigAgentData" name="sigAgentData" />
        </div>

      </fieldset>

      <!-- 6. Validation -->
      <div class="actions">
        <button id="submitBtn" type="submit" class="primary">Payer / Continuer</button>
        <button id="resetBtn" type="reset" class="secondary">Réinitialiser</button>
      </div>

      <div id="statusMessage" role="status" aria-live="polite" class="status"></div>

      <!-- Zone de confirmation finale (affichée après la validation) -->
      <div id="finalStep" class="final-step" hidden>
        <p class="info">Étape finale : Confirmation du paiement</p>
        <button id="confirmPaymentBtn" type="button" class="primary">Confirmer le paiement</button>
      </div>

    </form>
  </main>

  <script src="formulaire.js"></script>
</body>
</html>
